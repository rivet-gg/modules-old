<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>OpenGB E2E Test</title>
	</head>
	<body>
		<h1>OpenGB E2E Test</h1>

		<div>
			<label for="environmentToggle">Environment:</label>
			<select id="environmentToggle" onchange="updateEnvironment()">
				<option value="local">Local</option>
				<option value="remote">Remote</option>
			</select>
		</div>

		<script type="module" src="./index.js"></script>

		<button onclick="findOrCreateLobby()">Find Or Create Lobby</button>
		<button onclick="fetchState()">Fetch State</button>
		<button onclick="resetState()">Reset State</button>

		<script>
			window.addEventListener('load', function() {
				const urlParams = new URLSearchParams(window.location.search);
				const environment = urlParams.get('env');
				if (environment === 'local' || environment === 'remote') {
					document.getElementById('environmentToggle').value = environment;
				}
			});

			function updateEnvironment() {
				const environment = document.getElementById('environmentToggle').value;
				const url = new URL(window.location);
				url.searchParams.set('env', environment);
				window.location.href = url.toString();
			}
		</script>
	</body>
</html>
